<html lang="en">
<head>
    <title>स्वतंत्र भारत</title>
    <!-- <script type="text/javascript" src="./srv.js"></script> -->
</head>
<body>
    <script type="text/javascript">
      //  var xhr = new XMLHttpRequest();
        var dt = ""
      async function callbck(data)
      {
            dt = await data.text()
            console.log("request sent"+dt);


//***************************
            var parentElement = document.getElementById("mainArea");

            // var childElement2 = document.createElement("div");
            
            // parentElement.innerHTML = dt;
                var childElement1 = document.createElement("div");
                childElement1.innerHTML= dt;
                parentElement.appendChild(childElement1);
        }
        
        function postReq(){
            fetch("https://chat-orcin-beta.vercel.app/?nme="+document.getElementById('nme').value,{
                method:"POST",
                credentials:"same-origin",
                // mode:"no-cors"

            }).then(callbck);
        }
        
        function named(){
            document.getElementById("nme").disabled = true;
            document.getElementById("btn1").disabled = true;
            
            var parentElement = document.getElementById("mainArea");

            // var childElement2 = document.createElement("div");
            
            // parentElement.innerHTML = dt;
                var childElement1 = document.createElement("div");
                childElement1.innerHTML= 
                    `Messege:
                    <input type="text" id="msgs">
                    <input type="button" value=Enter onclick="sendReq()" id="btn2">
                    <br><br>`;
                parentElement.appendChild(childElement1);
            setInterval(postReq, 300)
        }
        window.onbeforeunload = ()=>{
            fetch("https://chat-orcin-beta.vercel.app/?nme="+document.getElementById('nme').value,{
                    method:"DELETE",
                    credentials:"same-origin",
                    // mode:"no-cors"

                }).then();
                console.log(document.getElementById('nme').value+" deleted")
        }
        function sendReq(){
            fetch("https://chat-orcin-beta.vercel.app/?nme="+document.getElementById('nme').value+"&msg="+document.getElementById('msgs').value,{
                credentials:"same-origin"
                

            }).then(()=>{});
        }
    </script>
    Name :
    <input type="text" id="nme">
    <input type="button" value="Submit" id="btn1" onclick="named()">
    <br>
<div id="mainArea">

</div>
</body>
</html>
